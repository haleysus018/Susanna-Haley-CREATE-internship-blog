<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mermaid Diagram Generator</title>
<style>
 @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');

body {
  font-family: 'Inter', Arial, sans-serif;
  margin: 2rem;
  background: #ececec; /* soft neutral light gray */
  color: #222;
  transition: background-color 0.3s ease, color 0.3s ease;
}

h1 {
  text-align: center;
  font-weight: 600;
  color: #333;
  margin-bottom: 2rem;
}

textarea {
  width: 100%;
  height: 200px;
  font-family: 'Source Code Pro', monospace;
  font-size: 1rem;
  padding: 0.75rem;
  margin-bottom: 1rem;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 6px;
  background-color: white;
  color: #222;
  resize: vertical;
  transition: border-color 0.3s ease, background-color 0.3s ease, color 0.3s ease;
}

textarea:focus {
  outline: none;
  border-color: #4caf50;
  box-shadow: 0 0 8px #4caf5080;
}

/* Container for buttons spaced horizontally */
#buttonContainer {
  display: flex;
  gap: 1.5rem;
  justify-content: center;
  margin-bottom: 1.5rem;
}

/* Primary submit button - green */
button#renderBtn {
  background-color: #4caf50;
  color: white;
  border: none;
  padding: 0.75rem 2rem;
  font-size: 1.1rem;
  cursor: pointer;
  border-radius: 6px;
  box-shadow: 0 4px 8px rgba(76, 175, 80, 0.4);
  transition: background-color 0.3s ease, box-shadow 0.3s ease;
}

button#renderBtn:hover {
  background-color: #388e3c;
  box-shadow: 0 6px 12px rgba(56, 142, 60, 0.6);
}

/* Secondary toggle button - purple */
button#toggleThemeBtn {
  background-color: #673ab7;
  color: white;
  border: none;
  padding: 0.75rem 2rem;
  font-size: 1.1rem;
  cursor: pointer;
  border-radius: 6px;
  box-shadow: 0 4px 8px rgba(103, 58, 183, 0.4);
  transition: background-color 0.3s ease, box-shadow 0.3s ease;
}

button#toggleThemeBtn:hover {
  background-color: #4527a0;
  box-shadow: 0 6px 12px rgba(69, 39, 160, 0.6);
}

/* Diagram container styling */
#diagram {
  border: 1px solid #bbb;
  background: white;
  padding: 1.5rem;
  min-height: 300px;
  border-radius: 8px;
  box-shadow: 0 8px 20px rgb(0 0 0 / 0.05);
  transition: background-color 0.3s ease, color 0.3s ease;
  overflow: auto;
}

/* Dark mode styles */
body.inverted {
  background-color: #121212;
  color: #e0e0e0;
}
body.inverted h1 {
  color: white;
}

body.inverted textarea {
  background-color: #242424;
  color: #f0f0f0;
  border-color: #444;
  box-shadow: inset 0 1px 3px rgb(255 255 255 / 0.1);
}

body.inverted textarea:focus {
  border-color: #90caf9;
  box-shadow: 0 0 8px #90caf9;
}

body.inverted #diagram {
  background-color: #1e1e1e;
  border-color: #444;
  box-shadow: 0 8px 20px rgb(0 0 0 / 0.6);
  color: #ccc;
}

/* Adjust buttons in dark mode */
body.inverted button#renderBtn {
  background-color: #388e3c;
  box-shadow: 0 4px 8px rgba(56, 142, 60, 0.8);
}

body.inverted button#renderBtn:hover {
  background-color: #2e7d32;
  box-shadow: 0 6px 12px rgba(46, 125, 50, 1);
}

body.inverted button#toggleThemeBtn {
  background-color: #4527a0;
  box-shadow: 0 4px 8px rgba(69, 39, 160, 0.8);
}

body.inverted button#toggleThemeBtn:hover {
  background-color: #311b92;
  box-shadow: 0 6px 12px rgba(49, 27, 146, 1);
}

</style>
</head>
<body>

<h1>Mermaid Diagram Generator</h1>

<textarea id="mermaidInput" placeholder="Type your Mermaid code here...">
graph TD
    A[Start] --> B{Decision}
    B -- Yes --> C[Option 1]
    B -- No --> D[Option 2]
    C --> E[End]
    D --> E
</textarea>
<br />
<div id="buttonContainer">
  <button id="renderBtn">Submit</button>
  <button id="toggleThemeBtn" type="button">Toggle Dark Mode</button>
</div>

<div id="diagram">Your diagram will appear here</div>

<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';

  // Initialize mermaid without automatic rendering
  mermaid.initialize({ startOnLoad: false });

  const input = document.getElementById('mermaidInput');
  const diagramContainer = document.getElementById('diagram');
  const renderBtn = document.getElementById('renderBtn');

  renderBtn.addEventListener('click', async () => {
    const code = input.value.trim();
    if (!code) {
      diagramContainer.innerHTML = 'Please enter Mermaid diagram code.';
      return;
    }

    try {
      // Render Mermaid diagram to SVG
      const { svg } = await mermaid.render('theGraph', code);
      diagramContainer.innerHTML = svg;
    } catch (error) {
      diagramContainer.innerHTML = '<pre style="color:red;">Error rendering diagram:\n' + error.message + '</pre>';
    }
  });

  // Optional: render initial diagram on page load
  renderBtn.click();
  const toggleBtn = document.getElementById('toggleThemeBtn');
toggleBtn.addEventListener('click', () => {
  document.body.classList.toggle('inverted');
});

</script>

</body>
</html>
